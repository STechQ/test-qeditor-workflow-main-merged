"use strict";exports.id=8565,exports.ids=[8565],exports.modules={8565:(e,t,n)=>{n.r(t),n.d(t,{$Command:()=>Ne,AssumeRoleCommand:()=>zo,AssumeRoleResponseFilterSensitiveLog:()=>Sr,AssumeRoleWithSAMLCommand:()=>Uo,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>br,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>Er,AssumeRoleWithWebIdentityCommand:()=>Wo,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>vr,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Ar,CredentialsFilterSensitiveLog:()=>wr,DecodeAuthorizationMessageCommand:()=>Ho,ExpiredTokenException:()=>ur,GetAccessKeyInfoCommand:()=>Bo,GetCallerIdentityCommand:()=>Go,GetFederationTokenCommand:()=>Vo,GetFederationTokenResponseFilterSensitiveLog:()=>Rr,GetSessionTokenCommand:()=>Ko,GetSessionTokenResponseFilterSensitiveLog:()=>Tr,IDPCommunicationErrorException:()=>yr,IDPRejectedClaimException:()=>fr,InvalidAuthorizationMessageException:()=>gr,InvalidIdentityTokenException:()=>mr,MalformedPolicyDocumentException:()=>dr,PackedPolicyTooLargeException:()=>hr,RegionDisabledException:()=>pr,STS:()=>Zo,STSClient:()=>cr,STSServiceException:()=>lr,__Client:()=>ue,decorateDefaultCredentialProvider:()=>ri,getDefaultRoleAssumer:()=>ti,getDefaultRoleAssumerWithWebIdentity:()=>ni});var r=n(6806),s=n(8460),o=n(4647),i=n(3631);const a=(e,t,n)=>{if(t in e){if("true"===e[t])return!0;if("false"===e[t])return!1;throw new Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var c;!function(e){e.ENV="env",e.CONFIG="shared config entry"}(c||(c={}));const l={environmentVariableSelector:e=>a(e,"AWS_USE_DUALSTACK_ENDPOINT",c.ENV),configFileSelector:e=>a(e,"use_dualstack_endpoint",c.CONFIG),default:!1},u={environmentVariableSelector:e=>a(e,"AWS_USE_FIPS_ENDPOINT",c.ENV),configFileSelector:e=>a(e,"use_fips_endpoint",c.CONFIG),default:!1};var d=n(4606);const h=e=>e[d.zK]||(e[d.zK]={}),p=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t},f={environmentVariableSelector:e=>e.AWS_REGION,configFileSelector:e=>e.region,default:()=>{throw new Error("Region is missing")}},m={preferredFile:"credentials"},y=e=>"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips")),g=e=>y(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,w=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,S=/(\d+\.){3}\d+/,b=/\.\./,E=(e,t,n)=>{const r=async()=>{const r=n[e]??n[t];return"function"==typeof r?r():r};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof n.credentials?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{const e=await r();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:n,port:r,path:s}=e;return`${t}//${n}${r?":"+r:""}${s}`}}return e}:r};var v=n(4310),A=n(8354);const R="AWS_ENDPOINT_URL",T="endpoint_url";var C=n(1802);const I=e=>"object"==typeof e?"url"in e?(0,C.e)(e.url):e:(0,C.e)(e),P=async(e,t,n)=>{const r={},s=t?.getEndpointParameterInstructions?.()||{};for(const[t,o]of Object.entries(s))switch(o.type){case"staticContextParams":r[t]=o.value;break;case"contextParams":r[t]=e[o.name];break;case"clientContextParams":case"builtInParams":r[t]=await E(o.name,t,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return 0===Object.keys(s).length&&Object.assign(r,n),"s3"===String(n.serviceId).toLowerCase()&&await(async e=>{const t=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(e=>{const[t,n,r,,,s]=e.split(":"),o="arn"===t&&e.split(":").length>=6,i=Boolean(o&&n&&r&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i})(t)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else n=t,(!w.test(n)||S.test(n)||b.test(n)||-1!==t.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);var n;return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(r),r},$=({config:e,instructions:t})=>(n,r)=>async s=>{const o=await(async(e,t,n,r)=>{if(!n.endpoint){const e=await(async e=>(0,v.M)((e=>({environmentVariableSelector:t=>{const n=e.split(" ").map((e=>e.toUpperCase()));return t[[R,...n].join("_")]||t[R]||void 0},configFileSelector:(t,n)=>{if(n&&t.services){const r=n[["services",t.services].join(A.Ck)];if(r){const t=e.split(" ").map((e=>e.toLowerCase())),n=r[[t.join("_"),T].join(A.Ck)];if(n)return n}}const r=t[T];if(r)return r},default:void 0}))(e))())(n.serviceId||"");e&&(n.endpoint=()=>Promise.resolve(I(e)))}const s=await P(e,t,n);if("function"!=typeof n.endpointProvider)throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)})(s.input,{getEndpointParameterInstructions:()=>t},{...e},r);r.endpointV2=o,r.authSchemes=o.properties?.authSchemes;const i=r.authSchemes?.[0];if(i){r.signing_region=i.signingRegion,r.signing_service=i.signingName;const e=h(r),t=e?.selectedHttpAuthScheme?.httpAuthOption;t&&(t.signingProperties=Object.assign(t.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return n({...s})},x={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},k={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function O(e,t,n){return{applyToStack:r=>{r.add(((e,t)=>n=>async r=>{const{response:s}=await n(r);try{return{response:s,output:await t(s,e)}}catch(e){if(Object.defineProperty(e,"$response",{value:s}),!("$metadata"in e)){const t="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";e.message+="\n  "+t,void 0!==e.$responseBodyText&&e.$response&&(e.$response.body=e.$responseBodyText)}throw e}})(e,n),x),r.add(((e,t)=>(n,r)=>async s=>{const o=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const i=await t(s.input,{...e,endpoint:o});return n({...s,request:i})})(e,t),k)}}}const M={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:k.name},N=(e,t)=>({applyToStack:n=>{n.addRelativeTo($({config:e,instructions:t}),M)}}),D={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:M.name},L=e=>{let t=e.httpHandler;return{setHttpHandler(e){t=e},httpHandler:()=>t,updateHttpClientConfig(e,n){t.updateHttpClientConfig(e,n)},httpHandlerConfigs:()=>t.httpHandlerConfigs()}};class _{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new _({...e,headers:{...e.headers}});var n;return t.query&&(t.query=(n=t.query,Object.keys(n).reduce(((e,t)=>{const r=n[t];return{...e,[t]:Array.isArray(r)?[...r]:r}}),{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return _.clone(this)}}class j{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers}}const F=e=>e=>{throw e},q=(e,t)=>{};var z,U;(U=z||(z={})).STANDARD="standard",U.ADAPTIVE="adaptive";const W=z.STANDARD,H=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],B=["TimeoutError","RequestTimeout","RequestTimeoutException"],G=[500,502,503,504],V=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],K=e=>429===e.$metadata?.httpStatusCode||H.includes(e.name)||1==e.$retryable?.throttling,J=e=>(e=>e.$metadata?.clockSkewCorrected)(e)||B.includes(e.name)||V.includes(e?.code||"")||G.includes(e.$metadata?.httpStatusCode||0);class Z{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise((e=>setTimeout(e,t)))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp)return void(this.lastTimestamp=e);const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),K(e)){const e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(2*e)/2;if(this.requestCount++,t>this.lastTxRateBucket){const e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Y=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>n});class X{constructor(e){this.maxAttempts=e,this.mode=z.STANDARD,this.capacity=500,this.retryBackoffStrategy=(()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(2e4,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}})(),this.maxAttemptsProvider="function"==typeof e?e:async()=>e}async acquireInitialRetryToken(e){return Y({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){const n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){const n=t.errorType;this.retryBackoffStrategy.setDelayBase("THROTTLING"===n?500:100);const r=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,r):r,o=this.getCapacityCost(n);return this.capacity-=o,Y({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:o})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch(e){return console.warn("Max attempts provider could not resolve. Using default of 3"),3}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return"TRANSIENT"===e?10:5}isRetryableError(e){return"THROTTLING"===e||"TRANSIENT"===e}}class Q{constructor(e,t){this.maxAttemptsProvider=e,this.mode=z.ADAPTIVE;const{rateLimiter:n}=t??{};this.rateLimiter=n??new Z,this.standardRetryStrategy=new X(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const ee="AWS_MAX_ATTEMPTS",te="max_attempts",ne={environmentVariableSelector:e=>{const t=e[ee];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Environment variable ${ee} mast be a number, got "${t}"`);return n},configFileSelector:e=>{const t=e[te];if(!t)return;const n=parseInt(t);if(Number.isNaN(n))throw new Error(`Shared config file entry ${te} mast be a number, got "${t}"`);return n},default:3},re={environmentVariableSelector:e=>e.AWS_RETRY_MODE,configFileSelector:e=>e.retry_mode,default:W};class se{trace(){}debug(){}info(){}warn(){}error(){}}const oe=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const e of t)n.push(e);return n},ie=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,ae=()=>{let e=[],t=[],n=!1;const r=new Set,s=n=>(e.forEach((e=>{n.add(e.middleware,{...e})})),t.forEach((e=>{n.addRelativeTo(e.middleware,{...e})})),n.identifyOnResolve?.(a.identifyOnResolve()),n),o=e=>{const t=[];return e.before.forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...o(e))})),t.push(e),e.after.reverse().forEach((e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...o(e))})),t},i=(n=!1)=>{const r=[],s=[],i={};e.forEach((e=>{const t={...e,before:[],after:[]};for(const e of oe(t.name,t.aliases))i[e]=t;r.push(t)})),t.forEach((e=>{const t={...e,before:[],after:[]};for(const e of oe(t.name,t.aliases))i[e]=t;s.push(t)})),s.forEach((e=>{if(e.toMiddleware){const t=i[e.toMiddleware];if(void 0===t){if(n)return;throw new Error(`${e.toMiddleware} is not found when adding ${ie(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}));const a=(c=r,c.sort(((e,t)=>ce[t.step]-ce[e.step]||le[t.priority||"normal"]-le[e.priority||"normal"]))).map(o).reduce(((e,t)=>(e.push(...t),e)),[]);var c;return a},a={add:(t,n={})=>{const{name:s,override:o,aliases:i}=n,a={step:"initialize",priority:"normal",middleware:t,...n},c=oe(s,i);if(c.length>0){if(c.some((e=>r.has(e)))){if(!o)throw new Error(`Duplicate middleware name '${ie(s,i)}'`);for(const t of c){const n=e.findIndex((e=>e.name===t||e.aliases?.some((e=>e===t))));if(-1===n)continue;const r=e[n];if(r.step!==a.step||a.priority!==r.priority)throw new Error(`"${ie(r.name,r.aliases)}" middleware with ${r.priority} priority in ${r.step} step cannot be overridden by "${ie(s,i)}" middleware with ${a.priority} priority in ${a.step} step.`);e.splice(n,1)}}for(const e of c)r.add(e)}e.push(a)},addRelativeTo:(e,n)=>{const{name:s,override:o,aliases:i}=n,a={middleware:e,...n},c=oe(s,i);if(c.length>0){if(c.some((e=>r.has(e)))){if(!o)throw new Error(`Duplicate middleware name '${ie(s,i)}'`);for(const e of c){const n=t.findIndex((t=>t.name===e||t.aliases?.some((t=>t===e))));if(-1===n)continue;const r=t[n];if(r.toMiddleware!==a.toMiddleware||r.relation!==a.relation)throw new Error(`"${ie(r.name,r.aliases)}" middleware ${r.relation} "${r.toMiddleware}" middleware cannot be overridden by "${ie(s,i)}" middleware ${a.relation} "${a.toMiddleware}" middleware.`);t.splice(n,1)}}for(const e of c)r.add(e)}t.push(a)},clone:()=>s(ae()),use:e=>{e.applyToStack(a)},remove:n=>"string"==typeof n?(n=>{let s=!1;const o=e=>{const t=oe(e.name,e.aliases);if(t.includes(n)){s=!0;for(const e of t)r.delete(e);return!1}return!0};return e=e.filter(o),t=t.filter(o),s})(n):(n=>{let s=!1;const o=e=>{if(e.middleware===n){s=!0;for(const t of oe(e.name,e.aliases))r.delete(t);return!1}return!0};return e=e.filter(o),t=t.filter(o),s})(n),removeByTag:n=>{let s=!1;const o=e=>{const{tags:t,name:o,aliases:i}=e;if(t&&t.includes(n)){const e=oe(o,i);for(const t of e)r.delete(t);return s=!0,!1}return!0};return e=e.filter(o),t=t.filter(o),s},concat:e=>{const t=s(ae());return t.use(e),t.identifyOnResolve(n||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:s,identify:()=>i(!0).map((e=>{const t=e.step??e.relation+" "+e.toMiddleware;return ie(e.name,e.aliases)+" - "+t})),identifyOnResolve:e=>("boolean"==typeof e&&(n=e),n),resolve:(e,t)=>{for(const n of i().map((e=>e.middleware)).reverse())e=n(e,t);return n&&console.log(a.identify()),e}};return a},ce={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},le={high:3,normal:2,low:1};class ue{constructor(e){this.middlewareStack=ae(),this.config=e}send(e,t,n){const r="function"!=typeof t?t:void 0,s="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!s)return o(e).then((e=>e.output));o(e).then((e=>s(null,e.output)),(e=>s(e))).catch((()=>{}))}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}var de=n(4300);const he=(e,t=0,n=e.byteLength-t)=>{if(r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);var r;return de.Buffer.from(e,t,n)},pe=(e,t)=>{if("string"!=typeof e)throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?de.Buffer.from(e,t):de.Buffer.from(e)},fe=/^[A-Za-z0-9+/]*={0,2}$/,me=e=>{if(3*e.length%4!=0)throw new TypeError("Incorrect padding on base64 string.");if(!fe.exec(e))throw new TypeError("Invalid base64 string.");const t=pe(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},ye=e=>{const t=pe(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},ge=e=>{if("string"==typeof e)return e;if("object"!=typeof e||"number"!=typeof e.byteOffset||"number"!=typeof e.byteLength)throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return he(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},we=e=>{let t;if(t="string"==typeof e?ye(e):e,"object"!=typeof t||"number"!=typeof t.byteOffset||"number"!=typeof t.byteLength)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return he(t.buffer,t.byteOffset,t.byteLength).toString("base64")};class Se extends Uint8Array{static fromString(e,t="utf-8"){if("string"==typeof e)return transformFromString(e,t);throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,Se.prototype),e}transformToString(e="utf-8"){return transformToString(this,e)}}var be=n(2781);const Ee=e=>encodeURIComponent(e).replace(/[!'()*]/g,ve),ve=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Ae=n(3685),Re=n(5687);const Te=["ECONNRESET","EPIPE","ETIMEDOUT"],Ce=e=>{const t={};for(const n of Object.keys(e)){const r=e[n];t[n]=Array.isArray(r)?r.join(","):r}return t};class Ie{static create(e){return"function"==typeof e?.handle?e:new Ie(e)}static checkSocketUsage(e,t,n=console){const{sockets:r,requests:s,maxSockets:o}=e;if("number"!=typeof o||o===1/0)return t;if(Date.now()-15e3<t)return t;if(r&&s)for(const e in r){const t=r[e]?.length??0,i=s[e]?.length??0;if(t>=o&&i>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${i} additional requests are enqueued.\nSee https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html\nor increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise(((t,n)=>{"function"==typeof e?e().then((e=>{t(this.resolveDefaultConfig(e))})).catch(n):t(this.resolveDefaultConfig(e))}))}resolveDefaultConfig(e){const{requestTimeout:t,connectionTimeout:n,socketTimeout:r,httpAgent:s,httpsAgent:o}=e||{};return{connectionTimeout:n,requestTimeout:t??r,httpAgent:s instanceof Ae.Agent||"function"==typeof s?.destroy?s:new Ae.Agent({keepAlive:!0,maxSockets:50,...s}),httpsAgent:o instanceof Re.Agent||"function"==typeof o?.destroy?o:new Re.Agent({keepAlive:!0,maxSockets:50,...o}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:t}={}){let n;return this.config||(this.config=await this.configProvider),new Promise(((r,s)=>{let o;const i=async e=>{await o,clearTimeout(n),s(e)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(t?.aborted){const e=new Error("Request aborted");return e.name="AbortError",void i(e)}const a="https:"===e.protocol,c=a?this.config.httpsAgent:this.config.httpAgent;n=setTimeout((()=>{this.socketWarningTimestamp=Ie.checkSocketUsage(c,this.socketWarningTimestamp,this.config.logger)}),this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));const l=function(e){const t=[];for(let n of Object.keys(e).sort()){const r=e[n];if(n=Ee(n),Array.isArray(r))for(let e=0,s=r.length;e<s;e++)t.push(`${n}=${Ee(r[e])}`);else{let e=n;(r||"string"==typeof r)&&(e+=`=${Ee(r)}`),t.push(e)}}return t.join("&")}(e.query||{});let u;null==e.username&&null==e.password||(u=`${e.username??""}:${e.password??""}`);let d=e.path;l&&(d+=`?${l}`),e.fragment&&(d+=`#${e.fragment}`);const h={headers:e.headers,host:e.hostname,method:e.method,path:d,port:e.port,agent:c,auth:u},p=(a?Re.request:Ae.request)(h,(e=>{(async e=>{await o,clearTimeout(n),r(e)})({response:new j({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:Ce(e.headers),body:e})})}));if(p.on("error",(e=>{Te.includes(e.code)?i(Object.assign(e,{name:"TimeoutError"})):i(e)})),((e,t,n=0)=>{if(!n)return;const r=setTimeout((()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${n} ms`),{name:"TimeoutError"}))}),n);e.on("socket",(e=>{e.connecting?e.on("connect",(()=>{clearTimeout(r)})):clearTimeout(r)}))})(p,i,this.config.connectionTimeout),((e,t,n=0)=>{e.setTimeout(n,(()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${n} ms`),{name:"TimeoutError"}))}))})(p,i,this.config.requestTimeout),t){const e=()=>{p.destroy();const e=new Error("Request aborted");e.name="AbortError",i(e)};if("function"==typeof t.addEventListener){const n=t;n.addEventListener("abort",e,{once:!0}),p.once("close",(()=>n.removeEventListener("abort",e)))}else t.onabort=e}const f=h.agent;"object"==typeof f&&"keepAlive"in f&&((e,{keepAlive:t,keepAliveMsecs:n})=>{!0===t&&e.on("socket",(e=>{e.setKeepAlive(t,n||0)}))})(p,{keepAlive:f.keepAlive,keepAliveMsecs:f.keepAliveMsecs}),o=async function(e,t,n=1e3){const r=t.headers??{},s=r.Expect||r.expect;let o=-1,i=!1;"100-continue"===s&&await Promise.race([new Promise((e=>{o=Number(setTimeout(e,Math.max(1e3,n)))})),new Promise((t=>{e.on("continue",(()=>{clearTimeout(o),t()})),e.on("error",(()=>{i=!0,clearTimeout(o),t()}))}))]),i||function(e,t){if(t instanceof be.Readable)t.pipe(e);else{if(t){if(Buffer.isBuffer(t)||"string"==typeof t)return void e.end(t);const n=t;return"object"==typeof n&&n.buffer&&"number"==typeof n.byteOffset&&"number"==typeof n.byteLength?void e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength)):void e.end(Buffer.from(t))}e.end()}}(e,t.body)}(p,e,this.config.requestTimeout).catch((e=>(clearTimeout(n),s(e))))}))}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then((n=>({...n,[e]:t})))}httpHandlerConfigs(){return this.config??{}}}n(5158);class Pe{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter((t=>t!==e))}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(const t of this.sessions)t===e&&(t.destroyed||t.destroy())}}class $e extends be.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,t,n){this.bufferedBytes.push(e),n()}}const xe=e=>ke(e)?async function(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:e,value:o}=await n.read();o&&(t.push(o),s+=o.length),r=e}const o=new Uint8Array(s);let i=0;for(const e of t)o.set(e,i),i+=e.length;return o}(e):new Promise(((t,n)=>{const r=new $e;e.pipe(r),e.on("error",(e=>{r.end(),n(e)})),r.on("error",n),r.on("finish",(function(){const e=new Uint8Array(Buffer.concat(this.bufferedBytes));t(e)}))})),ke=e=>"function"==typeof ReadableStream&&e instanceof ReadableStream;n(3837);const Oe={},Me={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),Oe[e]=t,Me[t]=e}class Ne{constructor(){this.middlewareStack=ae()}static classBuilder(){return new De}resolveMiddlewareWithContext(e,t,n,{middlewareFn:r,clientName:s,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:a,smithyContext:c,additionalContext:l,CommandCtor:u}){for(const s of r.bind(this)(u,e,t,n))this.middlewareStack.use(s);const h=e.concat(this.middlewareStack),{logger:p}=t,f={logger:p,clientName:s,commandName:o,inputFilterSensitiveLog:i,outputFilterSensitiveLog:a,[d.zK]:{commandInstance:this,...c},...l},{requestHandler:m}=t;return h.resolve((e=>m.handle(e.request,n||{})),f)}}class De{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=(e=>e),t=(e=>e)){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let t;return t=class extends Ne{static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=t??{},e._init(this)}resolveMiddleware(n,r,s){return this.resolveMiddlewareWithContext(n,r,s,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const Le="***SensitiveInformation***",_e=Math.ceil(2**127*(2-2**-23)),je=e=>{const t=(e=>{if(null!=e){if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Ge.warn(Be(`Expected number but observed string: ${e}`)),t}if("number"==typeof e)return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}})(e);if(void 0!==t&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>_e)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Fe=(e,t)=>{const n=(e=>{if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}})(e);if(void 0!==n&&qe(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},qe=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},ze=e=>{if(null!=e){if("string"==typeof e)return e;if(["boolean","number","bigint"].includes(typeof e))return Ge.warn(Be(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Ue=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,We=e=>{const t=e.match(Ue);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},He=e=>(e=>Fe(e,32))("string"==typeof e?We(e):e),Be=e=>String(new TypeError(e).stack||e).split("\n").slice(0,5).filter((e=>!e.includes("stackTraceWarning"))).join("\n"),Ge={warn:console.warn},Ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ke=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Je=e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Ke.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[n,r,s,o,i,a,c,l,u]=t,d=(e=>(e=>Fe(e,16))("string"==typeof e?We(e):e))(rt(r)),h=et(s,"month",1,12),p=et(o,"day",1,31),f=Ze(d,h,p,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:l});return"Z"!=u.toUpperCase()&&f.setTime(f.getTime()-nt(u)),f},Ze=(e,t,n,r)=>{const s=t-1;return Xe(e,s,n),new Date(Date.UTC(e,s,n,et(r.hours,"hour",0,23),et(r.minutes,"minute",0,59),et(r.seconds,"seconds",0,60),tt(r.fractionalMilliseconds)))},Ye=[31,28,31,30,31,30,31,31,30,31,30,31],Xe=(e,t,n)=>{let r=Ye[t];if(1===t&&Qe(e)&&(r=29),n>r)throw new TypeError(`Invalid day for ${Ve[t]} in ${e}: ${n}`)},Qe=e=>e%4==0&&(e%100!=0||e%400==0),et=(e,t,n,r)=>{const s=(e=>(e=>Fe(e,8))("string"==typeof e?We(e):e))(rt(e));if(s<n||s>r)throw new TypeError(`${t} must be between ${n} and ${r}, inclusive`);return s},tt=e=>null==e?0:1e3*(e=>je("string"==typeof e?We(e):e))("0."+e),nt=e=>{const t=e[0];let n=1;if("+"==t)n=1;else{if("-"!=t)throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);n=-1}return n*(60*Number(e.substring(1,3))+Number(e.substring(4,6)))*60*1e3},rt=e=>{let t=0;for(;t<e.length-1&&"0"===e.charAt(t);)t++;return 0===t?e:e.slice(t)};class st extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,st.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}}const ot=(e,t={})=>{Object.entries(t).filter((([,e])=>void 0!==e)).forEach((([t,n])=>{null!=e[t]&&""!==e[t]||(e[t]=n)}));const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},it=e=>{switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};let at=!1;const ct=e=>{const t=[];for(const n in d.f3){const r=d.f3[n];void 0!==e[r]&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(e){this._checksumAlgorithms.push(e)},checksumAlgorithms(){return this._checksumAlgorithms}}},lt=e=>{const t={};return e.checksumAlgorithms().forEach((e=>{t[e.algorithmId()]=e.checksumConstructor()})),t},ut=e=>{let t=e.retryStrategy;return{setRetryStrategy(e){t=e},retryStrategy:()=>t}},dt=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},ht=e=>({...ct(e),...ut(e)});function pt(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}const ft=function(){const e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,[null,...arguments]));return Object.setPrototypeOf(t,e.prototype),t};ft.prototype=Object.create(String.prototype,{constructor:{value:ft,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(ft,String);var mt=n(6113),yt=n.n(mt);const gt={randomUUID:yt().randomUUID},wt=new Uint8Array(256);let St=wt.length;function bt(){return St>wt.length-16&&(yt().randomFillSync(wt),St=0),wt.slice(St,St+=16)}const Et=[];for(let e=0;e<256;++e)Et.push((e+256).toString(16).slice(1));const vt=function(e,t,n){if(gt.randomUUID&&!t&&!e)return gt.randomUUID();const r=(e=e||{}).random||(e.rng||bt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return Et[e[t+0]]+Et[e[t+1]]+Et[e[t+2]]+Et[e[t+3]]+"-"+Et[e[t+4]]+Et[e[t+5]]+"-"+Et[e[t+6]]+Et[e[t+7]]+"-"+Et[e[t+8]]+Et[e[t+9]]+"-"+Et[e[t+10]]+Et[e[t+11]]+Et[e[t+12]]+Et[e[t+13]]+Et[e[t+14]]+Et[e[t+15]]}(r)},At=e=>e?.body instanceof be.Readable||"undefined"!=typeof ReadableStream&&e?.body instanceof ReadableStream,Rt=e=>{const t={error:e,errorType:Tt(e)},n=It(e.$response);return n&&(t.retryAfterHint=n),t},Tt=e=>K(e)?"THROTTLING":J(e)?"TRANSIENT":(e=>{if(void 0!==e.$metadata?.httpStatusCode){const t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!J(e)}return!1})(e)?"SERVER_ERROR":"CLIENT_ERROR",Ct={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},It=e=>{if(!j.isInstance(e))return;const t=Object.keys(e.headers).find((e=>"retry-after"===e.toLowerCase()));if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(1e3*r)},Pt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:Ct.name};class $t{constructor(e){this.authSchemes=new Map;for(const[t,n]of Object.entries(e))void 0!==n&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}class xt{async sign(e,t,n){return e}}const kt="content-length",Ot={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};var Mt=n(1023);const Nt=async(e,t,n)=>({operation:h(t).operation,region:await p(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Dt=e=>{const t=[];switch(e.operation){case"AssumeRoleWithSAML":case"AssumeRoleWithWebIdentity":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t},Lt={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var _t=n(9798),jt=n(396),Ft=n(6860),qt=n(3405);class zt{constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){var n;this.hash.update("string"==typeof(n=Ut(e,t))?ye(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,mt.createHmac)(this.algorithmIdentifier,Ut(this.secret)):(0,mt.createHash)(this.algorithmIdentifier)}}function Ut(e,t){return de.Buffer.isBuffer(e)?e:"string"==typeof e?pe(e,t):ArrayBuffer.isView(e)?he(e.buffer,e.byteOffset,e.byteLength):he(e)}var Wt=n(7147);const Ht=e=>{if(!e)return 0;if("string"==typeof e)return Buffer.byteLength(e);if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;if("number"==typeof e.start&&"number"==typeof e.end)return e.end+1-e.start;if("string"==typeof e.path||Buffer.isBuffer(e.path))return(0,Wt.lstatSync)(e.path).size;if("number"==typeof e.fd)return(0,Wt.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Bt=n(783);const Gt={},Vt="endpoints";function Kt(e){return"object"!=typeof e||null==e?e:"ref"in e?`$${Kt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Kt).join(", ")})`:JSON.stringify(e,null,2)}class Jt extends Error{constructor(e){super(e),this.name="EndpointError"}}const Zt=(e,t)=>(e=>{const t=e.split("."),n=[];for(const r of t){const t=r.indexOf("[");if(-1!==t){if(r.indexOf("]")!==r.length-1)throw new Jt(`Path: '${e}' does not end with ']'`);const s=r.slice(t+1,-1);if(Number.isNaN(parseInt(s)))throw new Jt(`Invalid array index: '${s}' in path: '${e}'`);0!==t&&n.push(r.slice(0,t)),n.push(s)}else n.push(r)}return n})(t).reduce(((n,r)=>{if("object"!=typeof n)throw new Jt(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]}),e),Yt=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Xt=(e,t=!1)=>{if(!t)return Yt.test(e);const n=e.split(".");for(const e of n)if(!Xt(e))return!1;return!0},Qt=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),en={[d.cj.HTTP]:80,[d.cj.HTTPS]:443},tn={booleanEquals:(e,t)=>e===t,getAttr:Zt,isSet:e=>null!=e,isValidHostLabel:Xt,not:e=>!e,parseURL:e=>{const t=(()=>{try{if(e instanceof URL)return e;if("object"==typeof e&&"hostname"in e){const{hostname:t,port:n,protocol:r="",path:s="",query:o={}}=e,i=new URL(`${r}//${t}${n?`:${n}`:""}${s}`);return i.search=Object.entries(o).map((([e,t])=>`${e}=${t}`)).join("&"),i}return new URL(e)}catch(e){return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:r,hostname:s,pathname:o,protocol:i,search:a}=t;if(a)return null;const c=i.slice(0,-1);if(!Object.values(d.cj).includes(c))return null;const l=(e=>Qt.test(e)||e.startsWith("[")&&e.endsWith("]"))(s);return{scheme:c,authority:`${r}${n.includes(`${r}:${en[c]}`)||"string"==typeof e&&e.includes(`${r}:${en[c]}`)?`:${en[c]}`:""}`,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},nn=(e,t)=>{const n=[],r={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const t=e.indexOf("{",s);if(-1===t){n.push(e.slice(s));break}n.push(e.slice(s,t));const o=e.indexOf("}",t);if(-1===o){n.push(e.slice(t));break}"{"===e[t+1]&&"}"===e[o+1]&&(n.push(e.slice(t+1,o)),s=o+2);const i=e.substring(t+1,o);if(i.includes("#")){const[e,t]=i.split("#");n.push(Zt(r[e],t))}else n.push(r[i]);s=o+1}return n.join("")},rn=(e,t,n)=>{if("string"==typeof e)return nn(e,n);if(e.fn)return sn(e,n);if(e.ref)return(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord}[e]))(e,n);throw new Jt(`'${t}': ${String(e)} is not a string, function or reference.`)},sn=({fn:e,argv:t},n)=>{const r=t.map((e=>["boolean","number"].includes(typeof e)?e:rn(e,"arg",n))),s=e.split(".");return s[0]in Gt&&null!=s[1]?Gt[s[0]][s[1]](...r):tn[e](...r)},on=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new Jt(`'${e}' is already defined in Reference Record.`);const r=sn(t,n);return n.logger?.debug?.(`${Vt} evaluateCondition: ${Kt(t)} = ${Kt(r)}`),{result:""===r||!!r,...null!=e&&{toAssign:{name:e,value:r}}}},an=(e=[],t)=>{const n={};for(const r of e){const{result:e,toAssign:s}=on(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};s&&(n[s.name]=s.value,t.logger?.debug?.(`${Vt} assign: ${s.name} := ${Kt(s.value)}`))}return{result:!0,referenceRecord:n}},cn=(e,t)=>Object.entries(e).reduce(((e,[n,r])=>({...e,[n]:r.map((e=>{const r=rn(e,"Header value entry",t);if("string"!=typeof r)throw new Jt(`Header '${n}' value '${r}' is not a string`);return r}))})),{}),ln=(e,t)=>{if(Array.isArray(e))return e.map((e=>ln(e,t)));switch(typeof e){case"string":return nn(e,t);case"object":if(null===e)throw new Jt(`Unexpected endpoint property: ${e}`);return un(e,t);case"boolean":return e;default:throw new Jt("Unexpected endpoint property type: "+typeof e)}},un=(e,t)=>Object.entries(e).reduce(((e,[n,r])=>({...e,[n]:ln(r,t)})),{}),dn=(e,t)=>{const n=rn(e,"Endpoint URL",t);if("string"==typeof n)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new Jt("Endpoint URL must be a string, got "+typeof n)},hn=(e,t)=>{const{conditions:n,endpoint:r}=e,{result:s,referenceRecord:o}=an(n,t);if(!s)return;const i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:l}=r;return t.logger?.debug?.(`${Vt} Resolving endpoint from template: ${Kt(r)}`),{...null!=l&&{headers:cn(l,i)},...null!=c&&{properties:un(c,i)},url:dn(a,i)}},pn=(e,t)=>{const{conditions:n,error:r}=e,{result:s,referenceRecord:o}=an(n,t);if(s)throw new Jt(rn(r,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},fn=(e,t)=>{const{conditions:n,rules:r}=e,{result:s,referenceRecord:o}=an(n,t);if(s)return mn(r,{...t,referenceRecord:{...t.referenceRecord,...o}})},mn=(e,t)=>{for(const n of e)if("endpoint"===n.type){const e=hn(n,t);if(e)return e}else if("error"===n.type)pn(n,t);else{if("tree"!==n.type)throw new Jt(`Unknown endpoint rule: ${n}`);{const e=fn(n,t);if(e)return e}}throw new Jt("Rules evaluation failed")},yn="required",gn="type",wn="fn",Sn="argv",bn="ref",En=!0,vn="booleanEquals",An="stringEquals",Rn="sigv4",Tn="us-east-1",Cn="endpoint",In="https://sts.{Region}.{PartitionResult#dnsSuffix}",Pn="tree",$n="error",xn="getAttr",kn={[yn]:!1,[gn]:"String"},On={[yn]:!0,default:!1,[gn]:"Boolean"},Mn={[bn]:"Endpoint"},Nn={[wn]:"isSet",[Sn]:[{[bn]:"Region"}]},Dn={[bn]:"Region"},Ln={[wn]:"aws.partition",[Sn]:[Dn],assign:"PartitionResult"},_n={[bn]:"UseFIPS"},jn={[bn]:"UseDualStack"},Fn={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Rn,signingName:"sts",signingRegion:Tn}]},headers:{}},qn={},zn={conditions:[{[wn]:An,[Sn]:[Dn,"aws-global"]}],[Cn]:Fn,[gn]:Cn},Un={[wn]:vn,[Sn]:[_n,!0]},Wn={[wn]:vn,[Sn]:[jn,!0]},Hn={[wn]:xn,[Sn]:[{[bn]:"PartitionResult"},"supportsFIPS"]},Bn={[bn]:"PartitionResult"},Gn={[wn]:vn,[Sn]:[!0,{[wn]:xn,[Sn]:[Bn,"supportsDualStack"]}]},Vn=[{[wn]:"isSet",[Sn]:[Mn]}],Kn=[Un],Jn=[Wn],Zn={version:"1.0",parameters:{Region:kn,UseDualStack:On,UseFIPS:On,Endpoint:kn,UseGlobalEndpoint:On},rules:[{conditions:[{[wn]:vn,[Sn]:[{[bn]:"UseGlobalEndpoint"},En]},{[wn]:"not",[Sn]:Vn},Nn,Ln,{[wn]:vn,[Sn]:[_n,!1]},{[wn]:vn,[Sn]:[jn,!1]}],rules:[{conditions:[{[wn]:An,[Sn]:[Dn,"ap-northeast-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"ap-south-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"ap-southeast-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"ap-southeast-2"]}],endpoint:Fn,[gn]:Cn},zn,{conditions:[{[wn]:An,[Sn]:[Dn,"ca-central-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"eu-central-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"eu-north-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"eu-west-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"eu-west-2"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"eu-west-3"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"sa-east-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,Tn]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"us-east-2"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"us-west-1"]}],endpoint:Fn,[gn]:Cn},{conditions:[{[wn]:An,[Sn]:[Dn,"us-west-2"]}],endpoint:Fn,[gn]:Cn},{endpoint:{url:In,properties:{authSchemes:[{name:Rn,signingName:"sts",signingRegion:"{Region}"}]},headers:qn},[gn]:Cn}],[gn]:Pn},{conditions:Vn,rules:[{conditions:Kn,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[gn]:$n},{conditions:Jn,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[gn]:$n},{endpoint:{url:Mn,properties:qn,headers:qn},[gn]:Cn}],[gn]:Pn},{conditions:[Nn],rules:[{conditions:[Ln],rules:[{conditions:[Un,Wn],rules:[{conditions:[{[wn]:vn,[Sn]:[En,Hn]},Gn],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qn,headers:qn},[gn]:Cn}],[gn]:Pn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[gn]:$n}],[gn]:Pn},{conditions:Kn,rules:[{conditions:[{[wn]:vn,[Sn]:[Hn,En]}],rules:[{conditions:[{[wn]:An,[Sn]:[{[wn]:xn,[Sn]:[Bn,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:qn,headers:qn},[gn]:Cn},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:qn,headers:qn},[gn]:Cn}],[gn]:Pn},{error:"FIPS is enabled but this partition does not support FIPS",[gn]:$n}],[gn]:Pn},{conditions:Jn,rules:[{conditions:[Gn],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qn,headers:qn},[gn]:Cn}],[gn]:Pn},{error:"DualStack is enabled but this partition does not support DualStack",[gn]:$n}],[gn]:Pn},zn,{endpoint:{url:In,properties:qn,headers:qn},[gn]:Cn}],[gn]:Pn}],[gn]:Pn},{error:"Invalid Configuration: Missing Region",[gn]:$n}]},Yn=(e,t={})=>((e,t)=>{const{endpointParams:n,logger:r}=t,{parameters:s,rules:o}=e;t.logger?.debug?.(`${Vt} Initial EndpointParams: ${Kt(n)}`);const i=Object.entries(s).filter((([,e])=>null!=e.default)).map((([e,t])=>[e,t.default]));if(i.length>0)for(const[e,t]of i)n[e]=n[e]??t;const a=Object.entries(s).filter((([,e])=>e.required)).map((([e])=>e));for(const e of a)if(null==n[e])throw new Jt(`Missing required parameter: '${e}'`);const c=mn(o,{endpointParams:n,logger:r,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{const e=new URL(t.endpointParams.Endpoint),{protocol:n,port:r}=e;c.url.protocol=n,c.url.port=r}catch(e){}return t.logger?.debug?.(`${Vt} Resolved endpoint: ${Kt(c)}`),c})(Zn,{endpointParams:e,logger:t.logger});Gt.aws=Bt.Iu;var Xn=n(3054);const Qn="AWS_REGION",er="AWS_DEFAULT_REGION",tr=["in-region","cross-region","mobile","standard","legacy"],nr={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:"legacy"},rr=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[Qn]||process.env[er]))return process.env[Qn]??process.env[er];if(!process.env.AWS_EC2_METADATA_DISABLED)try{const{getInstanceMetadataEndpoint:e,httpRequest:t}=await n.e(7861).then(n.bind(n,7861)),r=await e();return(await t({...r,path:"/latest/meta-data/placement/region"})).toString()}catch(e){}},sr=e=>{var t;(t=process.version)&&!at&&parseInt(t.substring(1,t.indexOf(".")))<16&&(at=!0);const n=(({region:e=(0,v.M)(f),defaultsMode:t=(0,v.M)(nr)}={})=>(0,Xn.HP)((async()=>{const n="function"==typeof t?await t():t;switch(n?.toLowerCase()){case"auto":return(async e=>{if(e){const t="function"==typeof e?await e():e,n=await rr();return n?t===n?"in-region":"cross-region":"standard"}return"standard"})(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(n?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${tr.join(", ")}, got ${n}`)}})))(e),r=()=>n().then(it),s=(e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??me,base64Encoder:e?.base64Encoder??we,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Yn,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Dt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new jt.VR},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new xt}],logger:e?.logger??new se,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??C.e,utf8Decoder:e?.utf8Decoder??ye,utf8Encoder:e?.utf8Encoder??ge}))(e);return(0,_t.H)(process.version),{...s,...e,runtime:"node",defaultsMode:n,bodyLengthChecker:e?.bodyLengthChecker??Ht,credentialDefaultProvider:e?.credentialDefaultProvider??Ft.iw,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,qt.fV)({serviceId:s.serviceId,clientVersion:"3.629.0"}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4")||(async e=>await(0,Ft.iw)(e?.__config||{})()),signer:new jt.VR},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new xt}],maxAttempts:e?.maxAttempts??(0,v.M)(ne),region:e?.region??(0,v.M)(f,m),requestHandler:Ie.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,v.M)({...re,default:async()=>(await r()).retryMode||W}),sha256:e?.sha256??zt.bind(null,"sha256"),streamCollector:e?.streamCollector??xe,useDualstackEndpoint:e?.useDualstackEndpoint??(0,v.M)(l),useFipsEndpoint:e?.useFipsEndpoint??(0,v.M)(u)}};var or=n(2047);const ir=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){r=e},credentials:()=>r}},ar=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});class cr extends ue{constructor(...[e]){const t=(n=sr(e||{}),{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,useGlobalEndpoint:n.useGlobalEndpoint??!1,defaultSigningName:"sts"});var n;const a=(e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if("string"==typeof t)return g(t);const e=await t();return g(e)},useFipsEndpoint:async()=>{const e="string"==typeof t?t:await t();return!!y(e)||("function"!=typeof n?Promise.resolve(!!n):n())}}})((e=>{const{retryStrategy:t}=e,n=p(e.maxAttempts??3);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await p(e.retryMode)()===z.ADAPTIVE?new Q(n):new X(n))}})((0,i.er)(t))),c=((e,t)=>{const n={...(0,or.GW)(e),...ht(e),...L(e),...ir(e)};return t.forEach((e=>e.configure(n))),{...e,...(0,or.A1)(n),...(s=n,{...lt(s),...dt(s)}),...(r=n,{httpHandler:r.httpHandler()}),...ar(n)};var r,s})((e=>{const t=(n=e,{...n,stsClientCtor:cr});var n;return{...(0,Mt.K)(t)}})((e=>{const t=e.tls??!0,{endpoint:n}=e,r=null!=n?async()=>I(await p(n)()):void 0,s=!!n;return{...e,endpoint:r,tls:t,isCustomEndpoint:s,useDualstackEndpoint:p(e.useDualstackEndpoint??!1),useFipsEndpoint:p(e.useFipsEndpoint??!1)}})((0,r.S8)(a))),e?.extensions||[]);super(c),this.config=c,this.middlewareStack.use((0,i.XJ)(this.config)),this.middlewareStack.use((e=>({applyToStack:t=>{t.add((e=>(t,n)=>async r=>{let s=await e.retryStrategy();const o=await e.maxAttempts();if(!(e=>void 0!==e.acquireInitialRetryToken&&void 0!==e.refreshRetryTokenForRetry&&void 0!==e.recordSuccess)(s))return s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,r);{let e=await s.acquireInitialRetryToken(n.partition_id),a=new Error,c=0,l=0;const{request:u}=r,d=_.isInstance(u);for(d&&(u.headers["amz-sdk-invocation-id"]=vt());;)try{d&&(u.headers["amz-sdk-request"]=`attempt=${c+1}; max=${o}`);const{response:n,output:i}=await t(r);return s.recordSuccess(e),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=l,{response:n,output:i}}catch(t){const r=Rt(t);if(a=(i=t)instanceof Error?i:i instanceof Object?Object.assign(new Error,i):"string"==typeof i?new Error(i):new Error(`AWS SDK error wrapper for ${i}`),d&&At(u))throw(n.logger instanceof se?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{e=await s.refreshRetryTokenForRetry(e,r)}catch(e){throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=l,a}c=e.getRetryCount();const o=e.getRetryDelay();l+=o,await new Promise((e=>setTimeout(e,o)))}}var i})(e),Ct)}}))(this.config)),this.middlewareStack.use((e=>({applyToStack:t=>{var n;t.add((n=e.bodyLengthChecker,e=>async t=>{const r=t.request;if(_.isInstance(r)){const{body:e,headers:t}=r;if(e&&-1===Object.keys(t).map((e=>e.toLowerCase())).indexOf(kt))try{const t=n(e);r.headers={...r.headers,[kt]:String(t)}}catch(e){}}return e({...t,request:r})}),Ot)}}))(this.config)),this.middlewareStack.use((0,r.G2)(this.config)),this.middlewareStack.use((0,s.cV)(this.config)),this.middlewareStack.use((0,o.eV)(this.config)),this.middlewareStack.use(((e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(((e,t)=>(n,r)=>async s=>{const o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,s.input)),i=function(e){const t=new Map;for(const n of e)t.set(n.schemeId,n);return t}(e.httpAuthSchemes),a=h(r),c=[];for(const n of o){const s=i.get(n.schemeId);if(!s){c.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}const o=s.identityProvider(await t.identityProviderConfigProvider(e));if(!o){c.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:l={},signingProperties:u={}}=n.propertiesExtractor?.(e,r)||{};n.identityProperties=Object.assign(n.identityProperties||{},l),n.signingProperties=Object.assign(n.signingProperties||{},u),a.selectedHttpAuthScheme={httpAuthOption:n,identity:await o(n.identityProperties),signer:s.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join("\n"));return n(s)})(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),D)}}))(this.config,{httpAuthSchemeParametersProvider:Nt,identityProviderConfigProvider:async e=>new $t({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((this.config,{applyToStack:e=>{e.addRelativeTo(((e,t)=>async n=>{if(!_.isInstance(n.request))return e(n);const r=h(t).selectedHttpAuthScheme;if(!r)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:s={}},identity:o,signer:i}=r,a=await e({...n,request:await i.sign(n.request,o,s)}).catch((i.errorHandler||F)(s));return(i.successHandler||q)(a.response,s),a}),Pt)}}))}destroy(){super.destroy()}}class lr extends st{constructor(e){super(e),Object.setPrototypeOf(this,lr.prototype)}}class ur extends lr{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ur.prototype)}}class dr extends lr{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,dr.prototype)}}class hr extends lr{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,hr.prototype)}}class pr extends lr{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,pr.prototype)}}class fr extends lr{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,fr.prototype)}}class mr extends lr{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,mr.prototype)}}class yr extends lr{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,yr.prototype)}}class gr extends lr{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,gr.prototype)}}const wr=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Le}}),Sr=e=>({...e,...e.Credentials&&{Credentials:wr(e.Credentials)}}),br=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:Le}}),Er=e=>({...e,...e.Credentials&&{Credentials:wr(e.Credentials)}}),vr=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Le}}),Ar=e=>({...e,...e.Credentials&&{Credentials:wr(e.Credentials)}}),Rr=e=>({...e,...e.Credentials&&{Credentials:wr(e.Credentials)}}),Tr=e=>({...e,...e.Credentials&&{Credentials:wr(e.Credentials)}});var Cr=n(1958);const Ir=async(e,t)=>{const n=Ds;let r;return r=Fo({...Xr(e,t),[_s]:Fs,[No]:Ls}),Ns(t,n,"/",void 0,r)},Pr=async(e,t)=>{const n=Ds;let r;return r=Fo({...Qr(e,t),[_s]:Us,[No]:Ls}),Ns(t,n,"/",void 0,r)},$r=async(e,t)=>{const n=Ds;let r;return r=Fo({...es(e,t),[_s]:Ws,[No]:Ls}),Ns(t,n,"/",void 0,r)},xr=async(e,t)=>{const n=Ds;let r;return r=Fo({...ts(e,t),[_s]:Js,[No]:Ls}),Ns(t,n,"/",void 0,r)},kr=async(e,t)=>{const n=Ds;let r;return r=Fo({...ns(e,t),[_s]:ro,[No]:Ls}),Ns(t,n,"/",void 0,r)},Or=async(e,t)=>{const n=Ds;let r;return r=Fo({...rs(e,t),[_s]:so,[No]:Ls}),Ns(t,n,"/",void 0,r)},Mr=async(e,t)=>{const n=Ds;let r;return r=Fo({...ss(e,t),[_s]:oo,[No]:Ls}),Ns(t,n,"/",void 0,r)},Nr=async(e,t)=>{const n=Ds;let r;return r=Fo({...os(e,t),[_s]:io,[No]:Ls}),Ns(t,n,"/",void 0,r)},Dr=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=fs(n.AssumeRoleResult,t),{$metadata:ks(e),...r}},Lr=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=ms(n.AssumeRoleWithSAMLResult,t),{$metadata:ks(e),...r}},_r=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=ys(n.AssumeRoleWithWebIdentityResult,t),{$metadata:ks(e),...r}},jr=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=ws(n.DecodeAuthorizationMessageResult,t),{$metadata:ks(e),...r}},Fr=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=bs(n.GetAccessKeyInfoResult,t),{$metadata:ks(e),...r}},qr=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=Es(n.GetCallerIdentityResult,t),{$metadata:ks(e),...r}},zr=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=vs(n.GetFederationTokenResult,t),{$metadata:ks(e),...r}},Ur=async(e,t)=>{if(e.statusCode>=300)return Wr(e,t);const n=await(0,Cr.he)(e.body,t);let r={};return r=As(n.GetSessionTokenResult,t),{$metadata:ks(e),...r}},Wr=async(e,t)=>{const n={...e,body:await(0,Cr.OH)(e.body,t)},r=qo(e,n.body);switch(r){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Hr(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Jr(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Zr(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Yr(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Gr(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Kr(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Br(n,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await Vr(n,t);default:const s=n.body;return Os({output:e,parsedBody:s.Error,errorCode:r})}},Hr=async(e,t)=>{const n=e.body,r=Ss(n.Error,t),s=new ur({$metadata:ks(e),...r});return ot(s,n)},Br=async(e,t)=>{const n=e.body,r=Rs(n.Error,t),s=new yr({$metadata:ks(e),...r});return ot(s,n)},Gr=async(e,t)=>{const n=e.body,r=Ts(n.Error,t),s=new fr({$metadata:ks(e),...r});return ot(s,n)},Vr=async(e,t)=>{const n=e.body,r=Cs(n.Error,t),s=new gr({$metadata:ks(e),...r});return ot(s,n)},Kr=async(e,t)=>{const n=e.body,r=Is(n.Error,t),s=new mr({$metadata:ks(e),...r});return ot(s,n)},Jr=async(e,t)=>{const n=e.body,r=Ps(n.Error,t),s=new dr({$metadata:ks(e),...r});return ot(s,n)},Zr=async(e,t)=>{const n=e.body,r=$s(n.Error,t),s=new hr({$metadata:ks(e),...r});return ot(s,n)},Yr=async(e,t)=>{const n=e.body,r=xs(n.Error,t),s=new pr({$metadata:ks(e),...r});return ot(s,n)},Xr=(e,t)=>{const n={};if(null!=e[bo]&&(n[bo]=e[bo]),null!=e[Eo]&&(n[Eo]=e[Eo]),null!=e[po]){const r=is(e[po],t);0===e[po]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}if(null!=e[ho]&&(n[ho]=e[ho]),null!=e[Ys]&&(n[Ys]=e[Ys]),null!=e[xo]){const r=hs(e[xo],t);0===e[xo]?.length&&(n.Tags=[]),Object.entries(r).forEach((([e,t])=>{n[`Tags.${e}`]=t}))}if(null!=e[Oo]){const r=ds(e[Oo],t);0===e[Oo]?.length&&(n.TransitiveTagKeys=[]),Object.entries(r).forEach((([e,t])=>{n[`TransitiveTagKeys.${e}`]=t}))}if(null!=e[Qs]&&(n[Qs]=e[Qs]),null!=e[Io]&&(n[Io]=e[Io]),null!=e[ko]&&(n[ko]=e[ko]),null!=e[Co]&&(n[Co]=e[Co]),null!=e[yo]){const r=ls(e[yo],t);0===e[yo]?.length&&(n.ProvidedContexts=[]),Object.entries(r).forEach((([e,t])=>{n[`ProvidedContexts.${e}`]=t}))}return n},Qr=(e,t)=>{const n={};if(null!=e[bo]&&(n[bo]=e[bo]),null!=e[fo]&&(n[fo]=e[fo]),null!=e[Ro]&&(n[Ro]=e[Ro]),null!=e[po]){const r=is(e[po],t);0===e[po]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}return null!=e[ho]&&(n[ho]=e[ho]),null!=e[Ys]&&(n[Ys]=e[Ys]),n},es=(e,t)=>{const n={};if(null!=e[bo]&&(n[bo]=e[bo]),null!=e[Eo]&&(n[Eo]=e[Eo]),null!=e[Lo]&&(n[Lo]=e[Lo]),null!=e[go]&&(n[go]=e[go]),null!=e[po]){const r=is(e[po],t);0===e[po]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}return null!=e[ho]&&(n[ho]=e[ho]),null!=e[Ys]&&(n[Ys]=e[Ys]),n},ts=(e,t)=>{const n={};return null!=e[eo]&&(n[eo]=e[eo]),n},ns=(e,t)=>{const n={};return null!=e[js]&&(n[js]=e[js]),n},rs=(e,t)=>({}),ss=(e,t)=>{const n={};if(null!=e[lo]&&(n[lo]=e[lo]),null!=e[ho]&&(n[ho]=e[ho]),null!=e[po]){const r=is(e[po],t);0===e[po]?.length&&(n.PolicyArns=[]),Object.entries(r).forEach((([e,t])=>{n[`PolicyArns.${e}`]=t}))}if(null!=e[Ys]&&(n[Ys]=e[Ys]),null!=e[xo]){const r=hs(e[xo],t);0===e[xo]?.length&&(n.Tags=[]),Object.entries(r).forEach((([e,t])=>{n[`Tags.${e}`]=t}))}return n},os=(e,t)=>{const n={};return null!=e[Ys]&&(n[Ys]=e[Ys]),null!=e[Io]&&(n[Io]=e[Io]),null!=e[ko]&&(n[ko]=e[ko]),n},is=(e,t)=>{const n={};let r=1;for(const s of e){if(null===s)continue;const e=as(s,t);Object.entries(e).forEach((([e,t])=>{n[`member.${r}.${e}`]=t})),r++}return n},as=(e,t)=>{const n={};return null!=e[_o]&&(n[_o]=e[_o]),n},cs=(e,t)=>{const n={};return null!=e[mo]&&(n[mo]=e[mo]),null!=e[Ks]&&(n[Ks]=e[Ks]),n},ls=(e,t)=>{const n={};let r=1;for(const t of e){if(null===t)continue;const e=cs(t);Object.entries(e).forEach((([e,t])=>{n[`member.${r}.${e}`]=t})),r++}return n},us=(e,t)=>{const n={};return null!=e[co]&&(n[co]=e[co]),null!=e[Do]&&(n[Do]=e[Do]),n},ds=(e,t)=>{const n={};let r=1;for(const t of e)null!==t&&(n[`member.${r}`]=t,r++);return n},hs=(e,t)=>{const n={};let r=1;for(const t of e){if(null===t)continue;const e=us(t);Object.entries(e).forEach((([e,t])=>{n[`member.${r}.${e}`]=t})),r++}return n},ps=(e,t)=>{const n={};return null!=e[qs]&&(n[qs]=ze(e[qs])),null!=e[Bs]&&(n[Bs]=ze(e[Bs])),n},fs=(e,t)=>{const n={};return null!=e[Vs]&&(n[Vs]=gs(e[Vs],t)),null!=e[zs]&&(n[zs]=ps(e[zs])),null!=e[wo]&&(n[wo]=He(e[wo])),null!=e[Co]&&(n[Co]=ze(e[Co])),n},ms=(e,t)=>{const n={};return null!=e[Vs]&&(n[Vs]=gs(e[Vs],t)),null!=e[zs]&&(n[zs]=ps(e[zs])),null!=e[wo]&&(n[wo]=He(e[wo])),null!=e[vo]&&(n[vo]=ze(e[vo])),null!=e[Po]&&(n[Po]=ze(e[Po])),null!=e[ao]&&(n[ao]=ze(e[ao])),null!=e[Gs]&&(n[Gs]=ze(e[Gs])),null!=e[uo]&&(n[uo]=ze(e[uo])),null!=e[Co]&&(n[Co]=ze(e[Co])),n},ys=(e,t)=>{const n={};return null!=e[Vs]&&(n[Vs]=gs(e[Vs],t)),null!=e[To]&&(n[To]=ze(e[To])),null!=e[zs]&&(n[zs]=ps(e[zs])),null!=e[wo]&&(n[wo]=He(e[wo])),null!=e[So]&&(n[So]=ze(e[So])),null!=e[Gs]&&(n[Gs]=ze(e[Gs])),null!=e[Co]&&(n[Co]=ze(e[Co])),n},gs=(e,t)=>{const n={};return null!=e[js]&&(n[js]=ze(e[js])),null!=e[Ao]&&(n[Ao]=ze(e[Ao])),null!=e[$o]&&(n[$o]=ze(e[$o])),null!=e[Xs]&&(n[Xs]=((e,t)=>{if(null==e)throw new TypeError("Expected a non-null value");return e})(Je(e[Xs]))),n},ws=(e,t)=>{const n={};return null!=e[Zs]&&(n[Zs]=ze(e[Zs])),n},Ss=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},bs=(e,t)=>{const n={};return null!=e[Hs]&&(n[Hs]=ze(e[Hs])),n},Es=(e,t)=>{const n={};return null!=e[Mo]&&(n[Mo]=ze(e[Mo])),null!=e[Hs]&&(n[Hs]=ze(e[Hs])),null!=e[Bs]&&(n[Bs]=ze(e[Bs])),n},vs=(e,t)=>{const n={};return null!=e[Vs]&&(n[Vs]=gs(e[Vs],t)),null!=e[to]&&(n[to]=((e,t)=>{const n={};return null!=e[no]&&(n[no]=ze(e[no])),null!=e[Bs]&&(n[Bs]=ze(e[Bs])),n})(e[to])),null!=e[wo]&&(n[wo]=He(e[wo])),n},As=(e,t)=>{const n={};return null!=e[Vs]&&(n[Vs]=gs(e[Vs],t)),n},Rs=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},Ts=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},Cs=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},Is=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},Ps=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},$s=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},xs=(e,t)=>{const n={};return null!=e[jo]&&(n[jo]=ze(e[jo])),n},ks=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Os=(Ms=lr,({output:e,parsedBody:t,errorCode:n})=>{(({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const s=(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}))(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new n({name:t?.code||t?.Code||r||o||"UnknownError",$fault:"client",$metadata:s});throw ot(i,t)})({output:e,parsedBody:t,exceptionCtor:Ms,errorCode:n})});var Ms;const Ns=async(e,t,n,r,s)=>{const{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),l={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return void 0!==r&&(l.hostname=r),void 0!==s&&(l.body=s),new _(l)},Ds={"content-type":"application/x-www-form-urlencoded"},Ls="2011-06-15",_s="Action",js="AccessKeyId",Fs="AssumeRole",qs="AssumedRoleId",zs="AssumedRoleUser",Us="AssumeRoleWithSAML",Ws="AssumeRoleWithWebIdentity",Hs="Account",Bs="Arn",Gs="Audience",Vs="Credentials",Ks="ContextAssertion",Js="DecodeAuthorizationMessage",Zs="DecodedMessage",Ys="DurationSeconds",Xs="Expiration",Qs="ExternalId",eo="EncodedMessage",to="FederatedUser",no="FederatedUserId",ro="GetAccessKeyInfo",so="GetCallerIdentity",oo="GetFederationToken",io="GetSessionToken",ao="Issuer",co="Key",lo="Name",uo="NameQualifier",ho="Policy",po="PolicyArns",fo="PrincipalArn",mo="ProviderArn",yo="ProvidedContexts",go="ProviderId",wo="PackedPolicySize",So="Provider",bo="RoleArn",Eo="RoleSessionName",vo="Subject",Ao="SecretAccessKey",Ro="SAMLAssertion",To="SubjectFromWebIdentityToken",Co="SourceIdentity",Io="SerialNumber",Po="SubjectType",$o="SessionToken",xo="Tags",ko="TokenCode",Oo="TransitiveTagKeys",Mo="UserId",No="Version",Do="Value",Lo="WebIdentityToken",_o="arn",jo="message",Fo=e=>Object.entries(e).map((([e,t])=>pt(e)+"="+pt(t))).join("&"),qo=(e,t)=>void 0!==t.Error?.Code?t.Error.Code:404==e.statusCode?"NotFound":void 0;class zo extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Sr).ser(Ir).de(Dr).build()){}class Uo extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(br,Er).ser(Pr).de(Lr).build()){}class Wo extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(vr,Ar).ser($r).de(_r).build()){}class Ho extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(xr).de(jr).build()){}class Bo extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(kr).de(Fr).build()){}class Go extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(Or).de(qr).build()){}class Vo extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,Rr).ser(Mr).de(zr).build()){}class Ko extends(Ne.classBuilder().ep({...Lt}).m((function(e,t,n,r){return[O(n,this.serialize,this.deserialize),N(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,Tr).ser(Nr).de(Ur).build()){}const Jo={AssumeRoleCommand:zo,AssumeRoleWithSAMLCommand:Uo,AssumeRoleWithWebIdentityCommand:Wo,DecodeAuthorizationMessageCommand:Ho,GetAccessKeyInfoCommand:Bo,GetCallerIdentityCommand:Go,GetFederationTokenCommand:Vo,GetSessionTokenCommand:Ko};class Zo extends cr{}((e,t)=>{for(const n of Object.keys(e)){const r=e[n],s=async function(e,t,n){const s=new r(e);if("function"==typeof t)this.send(s,t);else{if("function"!=typeof n)return this.send(s,t);if("object"!=typeof t)throw new Error("Expected http options but got "+typeof t);this.send(s,t||{},n)}},o=(n[0].toLowerCase()+n.slice(1)).replace(/Command$/,"");t.prototype[o]=s}})(Jo,Zo);const Yo="us-east-1",Xo=e=>{if("string"==typeof e?.Arn){const t=e.Arn.split(":");if(t.length>4&&""!==t[4])return t[4]}},Qo=async(e,t,n)=>{const r="function"==typeof e?await e():e,s="function"==typeof t?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${r} (provider)`,`${s} (parent client)`,`${Yo} (STS default)`),r??s??Yo},ei=(e,t)=>t?class extends e{constructor(e){super(e);for(const e of t)this.middlewareStack.use(e)}}:e,ti=(e={},t)=>((e,t)=>{let n,r;return async(s,o)=>{if(r=s,!n){const{logger:s=e?.parentClientConfig?.logger,region:o,requestHandler:i=e?.parentClientConfig?.requestHandler,credentialProviderLogger:a}=e,c=await Qo(o,e?.parentClientConfig?.region,a);n=new t({credentialDefaultProvider:()=>async()=>r,region:c,requestHandler:i,logger:s})}const{Credentials:i,AssumedRoleUser:a}=await n.send(new zo(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const c=Xo(a);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}}}})(e,ei(cr,t)),ni=(e={},t)=>((e,t)=>{let n;return async r=>{if(!n){const{logger:r=e?.parentClientConfig?.logger,region:s,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:i}=e,a=await Qo(s,e?.parentClientConfig?.region,i);n=new t({region:a,requestHandler:o,logger:r})}const{Credentials:s,AssumedRoleUser:o}=await n.send(new Wo(r));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);const i=Xo(o);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}}}})(e,ei(cr,t)),ri=e=>t=>e({roleAssumer:ti(t),roleAssumerWithWebIdentity:ni(t),...t})},4310:(e,t,n)=>{n.d(t,{M:()=>i});var r=n(3054);function s(e){try{const t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch(t){return e}}var o=n(8354);const i=({environmentVariableSelector:e,configFileSelector:t,default:n},i={})=>{return(0,r.HP)((0,r.tS)((a=e,async()=>{try{const e=a(process.env);if(void 0===e)throw new Error;return e}catch(e){throw new r.mV(e.message||`Not found in ENV: ${s(a.toString())}`,{logger:undefined})}}),((e,{preferredFile:t="config",...n}={})=>async()=>{const i=(0,o.Jl)(n),{configFile:a,credentialsFile:c}=await(0,o.Zl)(n),l=c[i]||{},u=a[i]||{},d="config"===t?{...l,...u}:{...u,...l};try{const n=e(d,"config"===t?a:c);if(void 0===n)throw new Error;return n}catch(t){throw new r.mV(t.message||`Not found in config files w/ profile [${i}]: ${s(e.toString())}`,{logger:n.logger})}})(t,i),(e=>"function"==typeof e?async()=>await e():(0,r.f$)(e))(n)));var a}},3054:(e,t,n)=>{n.d(t,{mV:()=>s,kb:()=>r,tS:()=>o,f$:()=>i,HP:()=>a});class r extends Error{constructor(e,t=!0){let n,s=!0;"boolean"==typeof t?(n=void 0,s=t):null!=t&&"object"==typeof t&&(n=t.logger,s=t.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=s,Object.setPrototypeOf(this,r.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}}class s extends r{constructor(e,t=!0){super(e,t),this.name="CredentialsProviderError",Object.setPrototypeOf(this,s.prototype)}}const o=(...e)=>async()=>{if(0===e.length)throw new r("No providers in chain");let t;for(const n of e)try{return await n()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t},i=e=>()=>Promise.resolve(e),a=(e,t,n)=>{let r,s,o,i=!1;const a=async()=>{s||(s=e());try{r=await s,o=!0,i=!1}finally{s=void 0}return r};return void 0===t?async e=>(o&&!e?.forceRefresh||(r=await a()),r):async e=>(o&&!e?.forceRefresh||(r=await a()),i?r:n&&!n(r)?(i=!0,r):t(r)?(await a(),r):r)}},8354:(e,t,n)=>{n.d(t,{Ck:()=>E,Jl:()=>a,Zl:()=>v});var r=n(2037),s=n(1017);const o={},i=()=>{const{HOME:e,USERPROFILE:t,HOMEPATH:n,HOMEDRIVE:i=`C:${s.sep}`}=process.env;if(e)return e;if(t)return t;if(n)return`${i}${n}`;const a=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return o[a]||(o[a]=(0,r.homedir)()),o[a]},a=e=>e.profile||process.env.AWS_PROFILE||"default";n(6113);var c=n(7147);const{readFile:l}=c.promises;var u=n(4606);const d=e=>Object.entries(e).filter((([e])=>{const t=e.indexOf(E);return-1!==t&&Object.values(u.I).includes(e.substring(0,t))})).reduce(((e,[t,n])=>{const r=t.indexOf(E);return e[t.substring(0,r)===u.I.PROFILE?t.substring(r+1):t]=n,e}),{...e.default&&{default:e.default}}),h=()=>process.env.AWS_CONFIG_FILE||(0,s.join)(i(),".aws","config"),p=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,s.join)(i(),".aws","credentials"),f=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,m=["__proto__","profile __proto__"],y=e=>{const t={};let n,r;for(const s of e.split(/\r?\n/)){const e=s.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){n=void 0,r=void 0;const t=e.substring(1,e.length-1),s=f.exec(t);if(s){const[,e,,t]=s;Object.values(u.I).includes(e)&&(n=[e,t].join(E))}else n=t;if(m.includes(t))throw new Error(`Found invalid profile name "${t}"`)}else if(n){const o=e.indexOf("=");if(![0,-1].includes(o)){const[i,a]=[e.substring(0,o).trim(),e.substring(o+1).trim()];if(""===a)r=i;else{r&&s.trimStart()===s&&(r=void 0),t[n]=t[n]||{};const e=r?[r,i].join(E):i;t[n][e]=a}}}}return t},{readFile:g}=c.promises,w={},S=(e,t)=>(w[e]&&!t?.ignoreCache||(w[e]=g(e,"utf8")),w[e]),b=()=>({}),E=".",v=async(e={})=>{const{filepath:t=p(),configFilepath:n=h()}=e,r=i();let o=t;t.startsWith("~/")&&(o=(0,s.join)(r,t.slice(2)));let a=n;n.startsWith("~/")&&(a=(0,s.join)(r,n.slice(2)));const c=await Promise.all([S(a,{ignoreCache:e.ignoreCache}).then(y).then(d).catch(b),S(o,{ignoreCache:e.ignoreCache}).then(y).catch(b)]);return{configFile:c[0],credentialsFile:c[1]}}},4606:(e,t,n)=>{var r,s,o,i,a;n.d(t,{f3:()=>i,cj:()=>o,I:()=>l,zK:()=>c}),function(e){e.HEADER="header",e.QUERY="query"}(r||(r={})),function(e){e.HEADER="header",e.QUERY="query"}(s||(s={})),function(e){e.HTTP="http",e.HTTPS="https"}(o||(o={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(i||(i={})),function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"}(a||(a={}));const c="__smithy_context";var l,u;!function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"}(l||(l={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(u||(u={}))},1802:(e,t,n)=>{n.d(t,{e:()=>r});const r=e=>{if("string"==typeof e)return r(new URL(e));const{hostname:t,pathname:n,port:s,protocol:o,search:i}=e;let a;return i&&(a=function(e){const t={};if(e=e.replace(/^\?/,""))for(const n of e.split("&")){let[e,r=null]=n.split("=");e=decodeURIComponent(e),r&&(r=decodeURIComponent(r)),e in t?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:t[e]=r}return t}(i)),{hostname:t,port:s?parseInt(s):void 0,protocol:o,path:n,query:a}}}};