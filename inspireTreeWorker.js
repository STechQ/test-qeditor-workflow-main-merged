!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nemo=t():e.nemo=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="dist",r(r.s=713)}({13:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GhostContants=void 0;var n=function(){function e(){}return e.Name="Ghost",e}();t.GhostContants=n},147:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspireTreeHelper=void 0;var n=r(18),o=r(13),i=function(){function e(){}return e.prototype.createInspireTreeCommands=function(e,t){var r=this,n=[],o=function(e,t,i,u){for(var a=e.length>t.length?e.length:t.length,c=0;c<a;c++){u++;var p=e[c],s=t[c],l=i.map((function(e){return e}));if(l.push(u),p&&!s)return n.push({path:l,item:p,type:"add"}),void o(e.slice(c+1),[],i,u);if(!p&&s)return n.push({path:l,item:s,type:"delete"}),u--,void o([],t.slice(c+1),i,u);if(!r.isEqual(p,s)){var f=e[c+1],d=t[c+1];return f||d?f&&!d?(n.push({path:l,item:p,type:"add"}),void(r.isEqual(f,s)||o(e.slice(c+1),[],i,u))):!f&&d?(n.push({path:l,item:s,type:"delete"}),u--,void(r.isEqual(p,d)||o([],t.slice(c+1),i,u))):r.isEqual(f,s)?(n.push({path:l,item:p,type:"add"}),void o(e.slice(c+1),t.slice(c),i,u)):(n.push({path:l,item:s,type:"delete"}),u--,void o(e.slice(c),t.slice(c+1),i,u)):(n.push({path:l,item:p,type:"update"}),void o(e.slice(c+1),t.slice(c+1),i,u))}var y=r.getSafeChildNode(p.children),v=r.getSafeChildNode(s.children),m=i.map((function(e){return e}));m.push(u),o(y,v,m,-1)}};return o(t,e.currentTreeData,[],-1),n},e.prototype.isEqual=function(e,t){return!e&&!t||!(!e||!t)&&e.text==t.text},e.prototype.getSafeChildNode=function(e){return e&&!0!==e?e:[]},e.prototype.createInspireTreeEditorDisplayName=function(e,t){if(t){var r={},o={},i={customCompValues:{},editorDisplayNames:{}};return n.QJsonHelper.ForEachComp(t,(function(t,n){var u=e.getComponentPim(t.T),a=e.pimManager.GetComponentList();return"CustomComponent"==t.T?Object.keys(a).forEach((function(e){var r,n=a[e];Object.keys(null===(r=n.Component)||void 0===r?void 0:r.Properties).forEach((function(r){var c,p,s,l;if("QJsonPath"==(null===(c=n.Component)||void 0===c?void 0:c.Properties[r].Name)&&(null===(s=null===(p=n.Component)||void 0===p?void 0:p.Properties[r].DefaultValue)||void 0===s?void 0:s.EditorDefault)==(null===(l=t.P.QJsonPath)||void 0===l?void 0:l.H)&&(null==u?void 0:u.EditorDisplayName)){var f="RenderingComponent"==a[e].Component.Name?u.EditorDisplayName:a[e].Component.Name;o[t._Editor.eID]=f,i.customCompValues=o}}))})):(null==u?void 0:u.EditorDisplayName)&&(r[t.T]||(r[t.T]=u.EditorDisplayName,i.editorDisplayNames=r)),!0})),i}},e.prototype.createInspireTreeJson=function(e,t){var r=this;if(!e||!t)return[];var o=[],i=function(e){var r,n;return"CustomComponent"==e.T?null===(r=t.customCompValues)||void 0===r?void 0:r[e._Editor.eID]:null===(n=t.editorDisplayNames)||void 0===n?void 0:n[e.T]};return n.QJsonHelper.ForEachComp(e,(function(e,t){var n=function(e,t){var u=i(e),a=r.createInspireItem(e,u);if(Object.keys(e.C).forEach((function(t){e.C[t].c.filter((function(e){return null!=e})).map((function(e){var t;if(a.children=a.children||[],null==e?void 0:e.C)t=n(e,!0);else{var o=i(e);t=r.createInspireItem(e,o)}a.children.push(t)}))})),t)return a;o.push(a)};return n(e,1!=(null==t?void 0:t.length)),!0})),o},e.prototype.createInspireItem=function(e,t){var r,n,i={text:(null!=t?t:e.T)+"("+e.P.ID.H+")",EID:e._Editor.eID,compType:e.T,O:{cType:null===(r=e.O)||void 0===r?void 0:r.cType},nativeCompType:(null===(n=e.CP)||void 0===n?void 0:n.includes("<<named:"))?"namedComponent":void 0};return e.T==o.GhostContants.Name&&(i.itree={state:{"drop-target":!1,draggable:!1,selectable:!1,focused:!1,selected:!1}}),e.O&&0===Object.keys(e.O).length&&(i.itree={state:{"drop-target":!1}}),i},e}();t.InspireTreeHelper=i},18:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.QJsonHelper=t.CompSearchKey=void 0;var o,i=r(6);!function(e){e[e.PID=0]="PID",e[e.EditorID=1]="EditorID",e[e.Render=2]="Render"}(o=t.CompSearchKey||(t.CompSearchKey={}));var u=function(){function e(){}return e.ForEachComp=function(e,t,r){var n=function(e){for(var r,o=e.curJson,i=e.path,u=e.parentCompJson,a=e.compiledJson,c=0;c<o.length;c++){var p=o[c],s=null==a?void 0:a[c];if(p){if(i.push(c),!1===t(p,i.map((function(e){return e})),{compName:p.T,eID:p._Editor.eID,parentCompJson:u,compiledJson:s}))return!1;if(p.C)for(var l in p.C){if(i.push(l),!1===n({curJson:p.C[l].c,path:i,parentCompJson:p,compiledJson:null===(r=null==s?void 0:s.C[l])||void 0===r?void 0:r.c}))return!1;i.pop()}i.pop()}}};n({curJson:e,path:[],compiledJson:r})},e.findComponentByType=function(t,r){var n;return e.ForEachComp(t,(function(e){return e.T!=r||(n=e,!1)})),n},e.prototype.findParentArrayPath=function(t,r){return e.FindParentArrayPath(t,r)},e.FindParentArrayPath=function(e,t){var r,o,u=null,a=e.pop();if(0==e.length)return{selfIndex:a,parentArray:t,parent:null};var c=t;try{for(var p=n(e),s=p.next();!s.done;s=p.next()){var l=s.value;c=(new i.TypeHelper).isObject(c)?(u=c).C[l].c:c[l]}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}return{selfIndex:a,parentArray:c,parent:u}},e.prototype.findCompBySearchField=function(t,r,n){return void 0===n&&(n=o.EditorID),e.FindCompBySearchField(t,r,n)},e.FindCompBySearchField=function(t,r,n){void 0===n&&(n=o.EditorID);var i=null;return e.ForEachComp(t,(function(e,t){var u;switch(n){case o.PID:if(e.P.ID.H==r)return i={compJson:e,curPath:t},!1;break;case o.Render:if((null===(u=e.P.Render)||void 0===u?void 0:u.H)==r)return i={compJson:e,curPath:t},!1;break;case o.EditorID:default:if(e._Editor.eID==r)return i={compJson:e,curPath:t},!1}return!0})),i},e.ParseParameters=function(e,t){if(e){var r="TS"==t||"JS"==t?function(e){return{name:e.split(":")[0],type:e.split(":")[1]}}:function(e){return{name:e}};return e.split(",").map(r)}},e.FindCompPathByEID=function(t,r){var n;return e.ForEachComp(t,(function(e,t){return e._Editor.eID!=r||(n=t,!1)})),n},e}();t.QJsonHelper=u},6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHelper=void 0;var n=function(){function e(){}return e.prototype.isJsonString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.GetObjectType=function(e){return Object.prototype.toString.call(e)},e.prototype.isArray=function(e){return"[object Array]"==this.GetObjectType(e)},e.prototype.isString=function(e){return"[object String]"===this.GetObjectType(e)},e.prototype.isNumber=function(e){return"[object Number]"===this.GetObjectType(e)},e.prototype.isNull=function(e){return null==e},e.prototype.isFunction=function(e){return"[object Function]"===this.GetObjectType(e)},e.prototype.isObject=function(e){return"[object Object]"===this.GetObjectType(e)},e.prototype.isBool=function(e){return"[object Boolean]"===this.GetObjectType(e)},e.prototype.isBooleanConstructor=function(e){return"function Boolean() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isStringConstructor=function(e){return"function String() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isArrayConstructor=function(e){return"function Array() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isObjectConstructor=function(e){return"function Object() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isNumberConstructor=function(e){return"function Number() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isDateString=function(e){return!!this.isString(e)&&!isNaN(Date.parse(e))},e.prototype.isDate=function(e){return"[object Date]"===this.GetObjectType(e)},e.prototype.isFile=function(e){return"[object File]"===this.GetObjectType(e)},e.prototype.isBlob=function(e){return new Blob([e])instanceof Blob},e.prototype.cloneObject=function(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(Array.isArray(e)){t=[];for(var r=0,n=e.length;r<n;r++)t[r]=this.cloneObject(e[r]);return t}if("object"==typeof e){for(var o in t=e.constructor&&e.constructor.length<1?new e.constructor:{},e)e.hasOwnProperty(o)&&(t[o]=this.cloneObject(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},e}();t.TypeHelper=n},713:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspireTreeWorker=void 0;var n=r(147),o=function(){this.inspireTreeHelper=new n.InspireTreeHelper};t.InspireTreeWorker=o;var i=self,u=new o;i.onmessage=function(e){var t=e.data,r=u.inspireTreeHelper.createInspireTreeJson(t.pjson,t.editorDisplayNames);if(t.recreate)a({treeData:r,recreate:t.recreate});else{var n=u.inspireTreeHelper.createInspireTreeCommands(t,r);a({comamnds:n,treeData:r,recreate:t.recreate})}};var a=function(e){i.postMessage(e)};t.default=null}})}));